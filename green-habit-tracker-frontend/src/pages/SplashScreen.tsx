import { useEffect } from "react";
import { gsap } from "gsap";

export const SplashScreen = ({ onComplete }: { onComplete: () => void }) => {
  useEffect(() => {
    const timeline = gsap.timeline({ onComplete });

    // Animate the main globe
    timeline
      .fromTo(
        "#earth",
        { scale: 0.5, opacity: 0 },
        { scale: 1, opacity: 1, duration: 1.5, ease: "power4.out" }
      )
      .to("#earth", { rotate: 360, duration: 2, ease: "none" }, "-=1.5");

    // Animate continents
    timeline.fromTo(
      "#continents path",
      { scale: 0.8, opacity: 0 },
      {
        scale: 1,
        opacity: 1,
        duration: 2,
        ease: "elastic.out(1, 0.5)",
        stagger: 0.2,
      },
      "-=1.8"
    );

    // Animate additional paths
    timeline.fromTo(
      "#extra-details path",
      { scale: 0.8, opacity: 0 },
      { scale: 1, opacity: 1, duration: 1.5, ease: "power2.out", stagger: 0.1 },
      "-=1.5"
    );

    // Animate other paths (grouped)
    timeline.fromTo(
      "#other-paths path",
      { opacity: 0, y: 20 },
      { opacity: 1, y: 0, duration: 1.5, ease: "power2.out", stagger: 0.2 },
      "-=1.5"
    );

    // Glow effect for the Earth
    timeline.to(
      "#earth",
      { boxShadow: "0 0 20px #7fcb8f", duration: 1 },
      "-=1"
    );

    // Fade in application name
    timeline.fromTo(
      ".app-name",
      { opacity: 0, y: 30 },
      { opacity: 1, y: 0, duration: 2, ease: "power2.out" },
      "-=1"
    );

    // Fade in tagline
    timeline.fromTo(
      ".tagline",
      { opacity: 0, y: 20 },
      { opacity: 1, y: 0, duration: 1.5, ease: "power2.out" },
      "-=0.5"
    );

    // Extend splash screen visibility
    timeline.to(".splash-screen", {
      opacity: 0,
      duration: 1,
      delay: 2,
      ease: "power1.inOut",
    });
  }, [onComplete]);

  return (
    <div className="splash-screen flex flex-col justify-center items-center h-screen bg-calmBlue fixed top-0 left-0 w-full z-50">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 512 512"
        className="logo w-48 h-48"
      >
        <g id="earth">
          <path
            d="m397.476 437.667c73.726-55.987 98.997-270.977-15.366-374.328-36.226-23.762-79.549-37.595-126.11-37.595-63.879 0-121.676 26.018-163.389 68.027-86.748 121.006-.971 329.068 92.363 381.303 22.373 7.249 46.238 11.181 71.026 11.181 53.34 0 102.439-18.144 141.476-48.588z"
            fill="#b2e5fb"
          />
        </g>
        <g id="continents">
          <path
            d="m457.229 308.825c-39.74 2.59-82.185 23.586-106.167 43.185-21.063 17.214-32.638 42.531-32.928 69.88-9.387 2.397-20.07 3.911-33.296 4.826-30.203 2.088-52.953 28.221-50.864 58.417.002.023.005.046.007.07 7.248.688 14.59 1.053 22.018 1.053 53.635 0 102.977-18.349 142.114-49.1 29.628-22.959 51.332-71.647 59.116-128.331z"
            fill="#91dafa"
          />
        </g>
        <g id="extra-details">
          <path
            d="m167.256 349.776c45.311 0 24.043-60.226 0-60.226s-28.946 17.043-55.483 17.043c-26.538 0-36.064-35.901-36.064-59.366 0-11.896 8.323-38.245 24.967-38.245 16.645 0 50.834 6.678 50.834-36.81 0-1.727-.092-3.356-.251-4.912-39.329-12.493-52.432-26.984-52.432-47.771 0-10.283-2.001-18.853-6.215-25.718-41.328 41.622-66.867 98.94-66.867 162.229 0 102.379 66.824 189.136 159.23 219.074 17.681-7.732 30.854-25.059 30.854-63.481-.001-50.138-93.884-61.817-48.573-61.817z"
            fill="#acd980"
          />
          <path
            d="m256 243.864c-11.997 0-22.681-8.062-29.401 1.88-6.816 10.085 8.45 25.723 29.401 25.723s36.217-15.638 29.401-25.723c-6.72-9.942-17.404-1.88-29.401-1.88z"
            fill="#565e75"
          />
          <path
            d="m191.667 252.104c-7.284 0-14.209-3.154-19.001-8.653-2.721-3.123-2.396-7.86.727-10.581 3.122-2.721 7.86-2.396 10.581.727 1.943 2.23 4.747 3.508 7.692 3.508s5.75-1.279 7.693-3.508c2.722-3.123 7.459-3.448 10.582-.727 3.123 2.722 3.448 7.459.727 10.582-4.792 5.498-11.718 8.652-19.001 8.652z"
            fill="#565e75"
          />
          <path
            d="m320.334 252.104c-7.284 0-14.209-3.154-19.001-8.653-2.721-3.123-2.395-7.86.727-10.581s7.86-2.396 10.581.727c1.943 2.23 4.747 3.508 7.692 3.508s5.75-1.278 7.692-3.508c2.721-3.123 7.457-3.449 10.581-.727 3.123 2.721 3.448 7.458.727 10.581-4.79 5.499-11.716 8.653-18.999 8.653z"
            fill="#565e75"
          />
        </g>
        <g id="other-paths">
          <path
            d="m278.025 26.867c-.002-.023-.005-.046-.007-.07-7.248-.688-14.59-1.053-22.018-1.053-63.904 0-121.715 26.042-163.428 68.083-22.809 31.842-33.673 69.708-35.607 109.173 39.097-3.198 80.43-23.772 103.971-43.011 21.063-17.213 32.638-42.531 32.928-69.88 9.387-2.397 20.07-3.911 33.296-4.826 30.205-2.087 52.954-28.222 50.865-58.416z"
            fill="#91dafa"
          />
          <path
            d="m32.021 202.449c4.699.657 9.599.993 14.699.993h.01c37.095 0 77.879-17.627 104.528-36.182-3.858-37.631-52.432-26.984-52.432-47.771 0-10.283-2.001-18.853-6.215-25.718-29.287 29.496-50.63 66.879-60.59 108.678z"
            fill="#7fcb8f"
          />
          <path
            d="m382.11 63.338c-7.448 6.989-11.529 17.8-11.529 34.529 0 41.782-46.945 29.302-46.945 58.17 0 27.916 18.525 42.046 45.472 42.046 26.948 0 63.771-23.44 63.771 3.508s3.93 63.292-22.855 63.292c-36.751 0-72.236 23.02-72.236 65.968 0 11.357 1.27 21.446 3.481 30.491 28.103 20.337 50.994 52.809 56.206 76.324 54.031-42.136 88.781-107.84 88.781-181.666 0-80.607-41.429-151.526-104.146-192.662z"
            fill="#acd980"
          />
          <path
            d="m465.277 308.556c-41.941 0-88.605 22.525-114.215 43.453-3.537 2.89-6.799 6.014-9.792 9.332 9.665 39.533 37.37 59.022 56.206 76.324 40.532-31.61 70.214-76.484 82.514-128.101-4.689-.653-9.589-1.008-14.713-1.008z"
            fill="#7fcb8f"
          />
          <path
            d="m264.808 483.001c-.909-13.149 9.013-24.546 22.163-25.455 39.366-2.722 69.214-10.695 105.294-43.396 9.766-8.852 24.859-8.111 33.71 1.656 8.852 9.767 8.111 24.859-1.656 33.71-45.976 41.67-86.842 52.383-134.057 55.647-13.115.915-24.544-8.987-25.454-22.162z"
            fill="#7fcb8f"
          />
          <path
            d="m469.812 475.132c-30.041 24.456-71.801 27.391-99.192 0s-29.995-74.679 0-99.192c31.929-26.094 96.004-49.901 126.473-27.674 31.295 22.83 9.039 97.298-27.281 126.866z"
            fill="#68b181"
          />
          <path
            d="m408.298 446.392c-2.703 0-5.314-1.465-6.653-4.026-1.919-3.67-.499-8.202 3.171-10.122 22.945-11.997 39.906-24.965 54.993-42.048 2.742-3.105 7.482-3.398 10.586-.657 3.104 2.742 3.398 7.482.657 10.586-16.136 18.27-34.974 32.699-59.286 45.411-1.109.581-2.297.856-3.468.856z"
            fill="#5ea570"
          />
          <path
            d="m86.025 96.192c-8.852-9.767-8.111-24.859 1.656-33.71 45.976-41.67 86.842-52.383 134.057-55.647 13.143-.905 24.546 9.013 25.455 22.163.91 13.149-9.013 24.546-22.163 25.455-39.366 2.722-69.214 10.695-105.294 43.396-9.764 8.849-24.858 8.111-33.711-1.657z"
            fill="#7fcb8f"
          />
          <path
            d="m42.188 36.867c30.041-24.456 71.801-27.391 99.192 0s29.994 74.679 0 99.192c-31.929 26.094-96.004 49.902-126.473 27.674-31.295-22.83-9.039-97.298 27.281-126.866z"
            fill="#68b181"
          />
          <path
            d="m46.566 124.338c-1.764 0-3.536-.619-4.962-1.878-3.105-2.742-3.398-7.482-.657-10.587 16.137-18.271 34.975-32.7 59.286-45.411 3.671-1.918 8.202-.498 10.122 3.171 1.919 3.671.499 8.202-3.171 10.122-22.944 11.997-39.905 24.964-54.993 42.048-1.482 1.678-3.549 2.535-5.625 2.535z"
            fill="#5ea570"
          />
        </g>
      </svg>
      <h1 className="app-name text-4xl font-bold text-white mt-6">
        Green Habits
      </h1>
      <p className="tagline text-lg text-white mt-2">
        Let's make every choice count!
      </p>
    </div>
  );
};
